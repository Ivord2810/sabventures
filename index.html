<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sab Ventures - Invoice</title>
    <!-- Use Inter font from Google Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap">
    <!-- Tailwind CSS for modern styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Custom CSS for print functionality and mobile responsiveness -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }

        /* Basic print styles to hide unnecessary elements and optimize layout */
        @media print {
            .no-print {
                display: none;
            }
            body {
                background-color: #fff;
            }
            .invoice-container {
                box-shadow: none;
                border: none;
                width: 100%;
                margin: 0;
            }
            input, textarea, button {
                border: none;
            }
        }

        /* Mobile-specific styles for the table */
        @media (max-width: 640px) {
            .invoice-table thead {
                display: none; /* Hide the table header on mobile */
            }

            .invoice-table tbody, .invoice-table tr, .invoice-table td {
                display: block; /* Make table elements behave as blocks */
                width: 100%;
            }

            .invoice-table td {
                text-align: right;
                padding-left: 50%;
                position: relative;
            }

            .invoice-table td::before {
                content: attr(data-label);
                position: absolute;
                left: 1rem;
                width: calc(50% - 1.5rem);
                text-align: left;
                font-weight: 600;
                white-space: nowrap;
            }

            .invoice-table td:nth-child(1) {
                border-top: 2px solid #e5e7eb;
            }
        }
    </style>
</head>
<body class="p-4 flex justify-center items-start">
    <div class="invoice-container bg-white p-6 rounded-2xl shadow-xl w-full border border-gray-200">

        <!-- Header Section -->
        <header class="flex flex-col mb-8 border-b-2 pb-6">
            <div>
                <div class="text-3xl font-bold text-gray-800">
                    Sab Ventures
                </div>
                <p class="text-sm text-gray-600">0269670734 / 0530719925</p>
                <p class="text-sm text-gray-600">Mamprobi, Accra</p>
            </div>
            <div class="text-right mt-4">
                <h1 class="text-2xl font-extrabold text-emerald-600">INVOICE</h1>
                <p class="text-sm text-gray-500">
                    <span class="font-semibold">Invoice #</span>
                    <input type="text" value="INV-001" class="w-24 text-right bg-transparent focus:outline-none focus:border focus:border-gray-300 focus:rounded-md">
                </p>
                <p class="text-sm text-gray-500 mt-1">
                    <span class="font-semibold">Date:</span>
                    <input type="date" id="invoiceDate" class="w-28 text-right bg-transparent focus:outline-none focus:border focus:border-gray-300 focus:rounded-md">
                </p>
            </div>
        </header>

        <!-- Bill To Section -->
        <section class="mb-8">
            <h2 class="text-lg font-semibold text-gray-700 mb-2">BILL TO:</h2>
            <div class="flex flex-col space-y-2">
                <input type="text" placeholder="Client Name" class="p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-emerald-500 focus:outline-none">
            </div>
        </section>

        <!-- Line Items Table -->
        <section class="mb-8">
            <table class="w-full text-left table-auto invoice-table">
                <thead>
                    <tr class="bg-gray-100 text-gray-600 uppercase text-xs font-semibold leading-normal">
                        <th class="py-3 px-3 text-left w-[40%]">Description</th>
                        <th class="py-3 px-3 text-center w-[20%]">Qty</th>
                        <th class="py-3 px-3 text-center w-[20%]">Price (GH₵)</th>
                        <th class="py-3 px-3 text-right w-[20%]">Total</th>
                    </tr>
                </thead>
                <tbody id="invoiceTableBody" class="text-gray-600 text-sm font-light">
                    <!-- Initial row for a single item -->
                    <tr class="border-b border-gray-200 hover:bg-gray-50">
                        <td class="py-3 px-3 text-left whitespace-normal" data-label="Description">
                            <input type="text" placeholder="Item/Service Description" class="w-full bg-transparent focus:outline-none">
                        </td>
                        <td class="py-3 px-3 text-center" data-label="Qty">
                            <input type="number" value="1" min="0" class="qty w-16 text-center bg-transparent focus:outline-none">
                        </td>
                        <td class="py-3 px-3 text-center" data-label="Price (GH₵)">
                            <input type="number" value="0.00" min="0" step="0.01" class="price w-20 text-center bg-transparent focus:outline-none">
                        </td>
                        <td class="py-3 px-3 text-right" data-label="Total">
                            <span class="item-total">GH₵0.00</span>
                        </td>
                    </tr>
                </tbody>
            </table>
            <button id="addItemBtn" class="no-print mt-4 px-4 py-2 bg-emerald-500 text-white rounded-md hover:bg-emerald-600 transition-colors duration-200">
                Add Item
            </button>
        </section>

        <!-- Totals Section -->
        <section class="flex justify-end">
            <div class="w-full bg-gray-100 p-6 rounded-xl">
                <div class="flex justify-between mb-2">
                    <span class="font-medium text-gray-700">Subtotal</span>
                    <span id="subtotal" class="font-semibold">GH₵0.00</span>
                </div>
                <div class="flex justify-between mb-2">
                    <span class="font-medium text-gray-700">Tax (0%)</span>
                    <span id="tax" class="font-semibold">GH₵0.00</span>
                </div>
                <div class="border-t-2 border-gray-300 pt-4 mt-4 flex justify-between">
                    <span class="text-xl font-bold text-gray-800">TOTAL</span>
                    <span id="grandTotal" class="text-xl font-bold text-emerald-600">GH₵0.00</span>
                </div>
            </div>
        </section>

        <!-- Notes/Terms Section -->
        <section class="mt-8">
            <h2 class="text-lg font-semibold text-gray-500 mb-2">Thank you for patronizing us</h2>
        </section>

        <!-- Action Buttons Section (No print) -->
        <footer class="mt-8 flex flex-col justify-end space-y-4">
            <button onclick="clearInvoice()" class="no-print px-6 py-3 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors duration-200 font-semibold shadow-lg">
                Clear Invoice
            </button>
            <button onclick="printInvoice()" class="no-print px-6 py-3 bg-emerald-500 text-white rounded-xl hover:bg-emerald-600 transition-colors duration-200 font-semibold shadow-lg">
                Print Invoice
            </button>
        </footer>
    </div>

    <!-- JavaScript for functionality -->
    <script>
        // Function to update all totals
        function updateTotal() {
            let subtotal = 0;
            const rows = document.getElementById('invoiceTableBody').querySelectorAll('tr');

            // Intl.NumberFormat object for consistent formatting
            const formatter = new Intl.NumberFormat('en-GH', {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            });

            rows.forEach(row => {
                const qty = parseFloat(row.querySelector('.qty').value) || 0;
                const price = parseFloat(row.querySelector('.price').value) || 0;
                const itemTotal = qty * price;
                
                // Format the item total with commas and two decimal places
                row.querySelector('.item-total').textContent = `GH₵${formatter.format(itemTotal)}`;
                subtotal += itemTotal;
            });
            
            const taxRate = 0; // Currently 0%
            const taxAmount = subtotal * taxRate;
            const grandTotal = subtotal + taxAmount;
            
            // Format the final totals with commas and two decimal places
            document.getElementById('subtotal').textContent = `GH₵${formatter.format(subtotal)}`;
            document.getElementById('tax').textContent = `GH₵${formatter.format(taxAmount)}`;
            document.getElementById('grandTotal').textContent = `GH₵${formatter.format(grandTotal)}`;
        }
        
        // Function to add a new invoice item row
        function createItemRow() {
            const tableBody = document.getElementById('invoiceTableBody');
            const newRow = document.createElement('tr');
            newRow.className = 'border-b border-gray-200 hover:bg-gray-50';
            newRow.innerHTML = `
                <td class="py-3 px-3 text-left whitespace-normal" data-label="Description">
                    <input type="text" placeholder="Item/Service Description" class="w-full bg-transparent focus:outline-none">
                </td>
                <td class="py-3 px-3 text-center" data-label="Qty">
                    <input type="number" value="1" min="0" class="qty w-16 text-center bg-transparent focus:outline-none">
                </td>
                <td class="py-3 px-3 text-center" data-label="Price (GH₵)">
                    <input type="number" value="0.00" min="0" step="0.01" class="price w-20 text-center bg-transparent focus:outline-none">
                </td>
                <td class="py-3 px-3 text-right" data-label="Total">
                    <span class="item-total">GH₵0.00</span>
                </td>
            `;
            
            // Add event listeners to the new input fields
            const qtyInput = newRow.querySelector('.qty');
            const priceInput = newRow.querySelector('.price');
            
            // Call updateTotal on input change for real-time calculation
            qtyInput.addEventListener('input', updateTotal);
            priceInput.addEventListener('input', updateTotal);
            
            tableBody.appendChild(newRow);
        }
        
        // Function to clear the invoice
        function clearInvoice() {
            const inputs = document.querySelectorAll('input:not([type="date"]):not([readonly]), textarea');
            inputs.forEach(input => {
                input.value = '';
            });
            document.getElementById('subtotal').textContent = 'GH₵0.00';
            document.getElementById('tax').textContent = 'GH₵0.00';
            document.getElementById('grandTotal').textContent = 'GH₵0.00';
            const tableBody = document.getElementById('invoiceTableBody');
            while (tableBody.children.length > 1) {
                tableBody.removeChild(tableBody.lastChild);
            }
        }
        
        // Function to print the invoice using the browser's native print dialog
        function printInvoice() {
            console.log("Print function called. Preparing to print invoice.");
            window.print();
        }
        
        // Wait for the DOM to be fully loaded before running the script
        document.addEventListener('DOMContentLoaded', function () {
            // Set today's date
            const today = new Date();
            document.getElementById('invoiceDate').valueAsDate = today;
            
            // Initial calculation on page load
            updateTotal();
            
            // Event listener for the 'add item' button
            document.getElementById('addItemBtn').addEventListener('click', createItemRow);
            
            // Event delegation for dynamically added rows
            document.getElementById('invoiceTableBody').addEventListener('input', function(event) {
                if (event.target.classList.contains('qty') || event.target.classList.contains('price')) {
                    updateTotal();
                }
            });
        });
    </script>
</body>
</html>
